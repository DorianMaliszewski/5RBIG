i=2
while (i < length(list)) {
str(list[3,i])
i = i + 2
}
list
list = lapply(getCities[2,], function(i) {
str(i,3)
})
list = getCities
i=2
while (i < length(list)) {
str(list[3,i])
i = i + 2
}
i=2
while (i < length(list)) {
str(list[2,i])
i = i + 2
}
i=2
while (i < length(list)) {
str(list[2,i])
break
i = i + 2
}
str(list[2,1])
test = list[2,1]
View(test)
test = list[2,0]
test = list[2,3]
View(test)
test = list[2,2]
View(test)
test = list[1,1]
View(test)
View(initialcsv)
View(test)
View(test)
test = list[1,1]$plus_code$compound_code
test = strsplit(test, " ")[0]
test = strsplit(test, " ")
test = list[1,1]$plus_code$compound_code
test = strsplit(test, " ")
View(test)
test = list[1,1]$plus_code$compound_code
test = strsplit(test, " ")
View(test)
test = strsplit(test, " ")
test[1]
test = list[1,1]$plus_code$compound_code
test = strsplit(test, "[ ]", )
View(test)
test = list[1,1]$plus_code$compound_code
test = strsplit(test, "\ ", )
View(test)
test = list[1,1]$plus_code$compound_code
test = strsplit(test, " ", )[[1]]
test = list[1,1]$plus_code$compound_code
test = strsplit(test, "\\s", )[[1]]
test = list[1,1]$plus_code$compound_code
test = strsplit(test, "\\s+", )[[1]]
test = list[1,1]$plus_code$compound_code
test = strsplit(test, " +", )[[1]]
test = list[1,1]$plus_code$compound_code
test = strsplit(test, " +", )[[1]][2]
test = substr(test, 1, nchar(test)-1)
list = c()
i=1
while (i < length(getCities)) {
obj = getCities[1,i]$plus_code$compound_code
obj = strsplit(obj, " +", )[[1]][2]
obj = substr(obj, 1, nchar(obj)-1)
list[[i]] = obj
i = i + 1
}
list
list = c()
i=1
while (i < length(getCities) - 1) {
obj = getCities[1,i]$plus_code$compound_code
obj = strsplit(obj, " +", )[[1]][2]
obj = substr(obj, 1, nchar(obj)-1)
list[[i]] = obj
i = i + 1
}
list = c()
i=1
while (i < length(getCities) - 1) {
if (!is.null(getCities[1,i])) {
obj = getCities[1,i]$plus_code$compound_code
obj = strsplit(obj, " +", )[[1]][2]
obj = substr(obj, 1, nchar(obj)-1)
list[[i]] = obj
i = i + 1
}
}
i=1
list = c()
while (i < length(getCities) - 1) {
if ([1,i] %in% getCities) {
obj = getCities[1,i]$plus_code$compound_code
obj = strsplit(obj, " +", )[[1]][2]
obj = substr(obj, 1, nchar(obj)-1)
list[[i]] = obj
i = i + 1
}
}
list = c()
i=1
while (i < length(getCities) - 1) {
obj = getCities[1,i]$plus_code$compound_code
obj = strsplit(obj, " +", )[[1]][2]
obj = substr(obj, 1, nchar(obj)-1)
list[[i]] = obj
i = i + 1
}
list = c()
i=1
while (i < length(getCities) - 3) {
obj = getCities[1,i]$plus_code$compound_code
obj = strsplit(obj, " +", )[[1]][2]
obj = substr(obj, 1, nchar(obj)-1)
list[[i]] = obj
i = i + 1
}
list = c()
i=1
list = c()
i=1
while (i < length(getCities) - 1) {
obj = getCities[1,i]$plus_code$compound_code
obj = strsplit(obj, " +", )[[1]][2]
obj = substr(obj, 1, nchar(obj)-1)
list[[i]] = obj
i = i + 1
}
list
list = as_tibble(list)
View(list)
list = list %>% rename(Location = value)
View(list)
test = getCities[1,1]
View(test)
test = getCities[1,2]
View(test)
test = getCities[2,1]
View(test)
View(initialcsv)
View(getCities)
test = getCities[2,1]$results
View(test)
missing_location_completed = left_join(missing_location, list)
View(missing_location_completed)
View(missing_location)
missing_location_completed = full_join(missing_location, list)
View(missing_location_completed)
missing_location_completed = c()
missing_location_completed = full_join(missing_location, list)
list = full_join(missing_location, list)
View(missing_location)
missing_location_completed = missing_location + list
missing_location_completed = missing_location
missing_location_completed$Location = list
View(missing_location_completed)
missing_location_completed = missing_location
missing_location_completed$Location = list$Location
View(missing_location_completed)
csv1 = initialcsv
csv1 = left_join(csv1, missing_location)
View(csv1)
View(missing_location)
csv1 = left_join(csv1, missing_location_completed)
View(csv1)
View(missing_location_completed)
csv1 = left_join(csv1, missing_location_completed, c("Latitude", "Longitude"))
View(csv1)
csv1 = csv1 %>% left_join(missing_location_completed, by = c("Latitude", "Longitude"))
View(csv1)
glimpse(csv1)
csv1 = initialcsv
csv1 = csv1 %>% left_join(missing_location_completed, by = c("Latitude", "Longitude"))
View(csv1)
csv1 = initialcsv
csv1 = csv1 %>% full_join(missing_location_completed, by = c("Latitude", "Longitude"))
View(csv1)
csv1 = initialcsv
csv1 = csv1 %>% left_join(missing_location_completed, by = c("Latitude", "Longitude"))
View(csv1)
csv1 = initialcsv
csv1 = csv1 %>% left_join(missing_location_completed, by = c("Latitude", "Longitude"), copy = TRUE)
View(csv1)
csv1 = csv1 %>% mutate(Location = Location.x || Location.y)
csv1 = initialcsv
csv1 = csv1 %>% left_join(missing_location_completed)
View(csv1)
source('~/Projects/Cours/5RBIG/5RBIG.r')
csv1 = initialcsv %>% left_join(missing_location_completed)
csvWithLocation = csv1 %>% replace_na(Location.x, "") %>% replace_na(Location.y, "") %>% unite(Location, Location.x, Location.y)
csv1 = initialcsv %>% left_join(missing_location_completed)
View(csv1)
csv1 = initialcsv %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
csvWithLocation = csv1 %>% replace_na(Location.x, "") %>% replace_na(Location.y, "") %>% unite(Location, Location.x, Location.y)
csv1 = initialcsv %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
View(csv1)
csv1 = initialcsv %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
csvWithLocation = csv1 %>% replace_na(Location.x, "")
csv1 = initialcsv %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
csvWithLocation = csv1 %>% mutate(Location.x = replace_na(Location.x, ""))
csvWithLocation = csvWithLocation %>% mutate(Location.y = replace_na(Location.y, ""))
csvWithLocation = csvWithLocation %>% unite(Location, Location.x, Location.y)
View(csvWithLocation)
csv1 = initialcsv %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
csvWithLocation = csv1 %>% mutate(Location.x = replace_na(Location.x, ""))
csvWithLocation = csvWithLocation %>% mutate(Location.y = replace_na(Location.y, ""))
csvWithLocation = csvWithLocation %>% unite(Location, Location.x, Location.y, sep="")
View(csvWithLocation)
View(csvWithLocation)
View(missing_lat_long_completed)
View(missing_location_completed)
csvWithLocation = initialcsv %>% left_join(missing_lat_long_completed, by= "Location")
View(csvWithLocation)
##
# START : Put Location in initial data
##
csvWithLocation = initialcsv %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
csvWithLocation = csvWithLocation %>% mutate(Location.x = replace_na(Location.x, "")) %>% mutate(Location.y = replace_na(Location.y, "")) %>% unite(Location, Location.x, Location.y, sep="")
csvWithLocation = csvWithLocation %>% left_join(missing_lat_long_completed, by= "Location")
csvWithLocation = csvWithLocation %>% mutate(Longitude.x = replace_na(Longitude.x, "")) %>% mutate(Longitude.y = replace_na(Longitude.y, 0)) %>% mutate(Longitude = Longitude.x + Longitude.y)
##
# START : Put Location in initial data
##
csvWithLocation = initialcsv %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
csvWithLocation = csvWithLocation %>% mutate(Location.x = replace_na(Location.x, "")) %>% mutate(Location.y = replace_na(Location.y, "")) %>% unite(Location, Location.x, Location.y, sep="")
csvWithLocation = csvWithLocation %>% left_join(missing_lat_long_completed, by= "Location")
View(csvWithLocation)
csvWithLocation = csvWithLocation %>% mutate(Longitude.x = replace_na(Longitude.x, 0)) %>% mutate(Longitude.y = replace_na(Longitude.y, 0)) %>% mutate(Longitude = Longitude.x + Longitude.y)
View(csvWithLocation)
csvWithLocation = csvWithLocation %>% mutate(Latitude.x = replace_na(Latitude.x, 0)) %>% mutate(Latitude.y = replace_na(Latitude.y, 0)) %>% mutate(Latitude = Latitude.x + Latitude.y)
csvWithLocation = csvWithLocation %>% select(-Latitude.x, -Latitude.y, -Longitude.x, -Longitude.y)
View(csvWithLocation)
glimpse(csvWithLocation)
View(csvWithLocation)
View(getCities)
csvWithLocation = csvWithLocation %>% mutate_if(is.character, replace_na(., "")
View(csvWithLocation)
View(csvWithLocation)
csvWithLocation = csvWithLocation %>% mutate_if(is.character, function(x) {replace_na(x, "")})
View(csvWithLocation)
csvWithLocation = csvWithLocation %>% mutate_if(is.character, function(x) {replace_na(x, "")}) %>% mutate_if(is.numeric, function(x) {replace_na(x, 0)})
View(csvWithLocation)
View(csv1)
##
# START : Put Location in initial data
##
# Replacing all NA
csvWithLocation = initialcsv
csvWithLocation = csvWithLocation %>% mutate_if(is.character, function(x) {replace_na(x, "")}) %>% mutate_if(is.numeric, function(x) {replace_na(x, 0)})
# Concatenate Location columns
csvWithLocation = csvWithLocation %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
csvWithLocation = csvWithLocation %>% unite(Location, Location.x, Location.y, sep="")
# Concatenate Longitude and Latitude columns
csvWithLocation = csvWithLocation %>% left_join(missing_lat_long_completed, by= "Location")
csvWithLocation = csvWithLocation %>% mutate(Longitude.x = replace_na(Longitude.x, 0)) %>% mutate(Longitude.y = replace_na(Longitude.y, 0)) %>% mutate(Longitude = Longitude.x + Longitude.y)
csvWithLocation = csvWithLocation %>% mutate(Latitude.x = replace_na(Latitude.x, 0)) %>% mutate(Latitude.y = replace_na(Latitude.y, 0)) %>% mutate(Latitude = Latitude.x + Latitude.y)
# Deleting old columns
csvWithLocation = csvWithLocation %>% select(-Latitude.x, -Latitude.y, -Longitude.x, -Longitude.y)
View(csvWithLocation)
##
# START : Put Location in initial data
##
# Replacing all NA
csvWithLocation = initialcsv
csvWithLocation = csvWithLocation %>% mutate_if(is.character, function(x) {replace_na(x, "")}) %>% mutate_if(is.numeric, function(x) {replace_na(x, 0)})
##
# START : Put Location in initial data
##
csvWithLocation = initialcsv
# Concatenate Location columns
csvWithLocation = csvWithLocation %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
csvWithLocation = csvWithLocation %>% mutate_if(is.character, function(x) {replace_na(x, "")})
csvWithLocation = csvWithLocation %>% unite(Location, Location.x, Location.y, sep="")
# Concatenate Longitude and Latitude columns
csvWithLocation = csvWithLocation %>% left_join(missing_lat_long_completed, by= "Location")
csvWithLocation = csvWithLocation %>% mutate_if(is.numeric, function(x) {replace_na(x, 0)})
csvWithLocation = csvWithLocation %>% mutate(Longitude.x = replace_na(Longitude.x, 0)) %>% mutate(Longitude.y = replace_na(Longitude.y, 0)) %>% mutate(Longitude = Longitude.x + Longitude.y)
csvWithLocation = csvWithLocation %>% mutate(Latitude.x = replace_na(Latitude.x, 0)) %>% mutate(Latitude.y = replace_na(Latitude.y, 0)) %>% mutate(Latitude = Latitude.x + Latitude.y)
# Deleting old columns
csvWithLocation = csvWithLocation %>% select(-Latitude.x, -Latitude.y, -Longitude.x, -Longitude.y)
View(csvWithLocation)
##
# START : Put Location in initial data
##
csvWithLocation = initialcsv
# Concatenate Location columns
csvWithLocation = csvWithLocation %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
csvWithLocation = csvWithLocation %>% mutate_if(is.character, function(x) {replace_na(x, "")})
csvWithLocation = csvWithLocation %>% unite(Location, Location.x, Location.y, sep="")
# Concatenate Longitude and Latitude columns
csvWithLocation = csvWithLocation %>% left_join(missing_lat_long_completed, by= "Location")
View(csvWithLocation)
csvWithLocation = csvWithLocation %>% mutate_if(is.numeric, function(x) {replace_na(x, 0)})
csvWithLocation = csvWithLocation %>% mutate(Longitude.x = replace_na(Longitude.x, 0)) %>% mutate(Longitude.y = replace_na(Longitude.y, 0)) %>% mutate(Longitude = Longitude.x + Longitude.y)
csvWithLocation = csvWithLocation %>% mutate(Latitude.x = replace_na(Latitude.x, 0)) %>% mutate(Latitude.y = replace_na(Latitude.y, 0)) %>% mutate(Latitude = Latitude.x + Latitude.y)
# Deleting old columns
csvWithLocation = csvWithLocation %>% select(-Latitude.x, -Latitude.y, -Longitude.x, -Longitude.y)
View(csvWithLocation)
View(csvWithLocation)
dateTibble = csvWithLocation %>% separate(Date, c("Month","Day", "Year"), sep = "\\")
dateTibble = csvWithLocation %>% separate(Date, c("Month","Day", "Year"), sep = "\/")
dateTibble = csvWithLocation %>% separate(Date, c("Month","Day", "Year"), sep = "/")
View(dateTibble)
View(dateTibble)
View(csvWithLocation)
rm(csv1)
rm(csvWithLocation)
rm(places)
rm(test)
rm(lat_long)
rm(lat_long_completed)
rm(dateTibble)
##
# START : Put Location in initial data
##
formattedCsv = initialcsv
# Concatenate Location columns
formattedCsv = formattedCsv %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
formattedCsv = formattedCsv %>% mutate_if(is.character, function(x) {replace_na(x, "")})
formattedCsv = formattedCsv %>% unite(Location, Location.x, Location.y, sep="")
# Concatenate Longitude and Latitude columns
formattedCsv = formattedCsv %>% left_join(missing_lat_long_completed, by= "Location")
formattedCsv = formattedCsv %>% mutate_if(is.numeric, function(x) {replace_na(x, 0)})
formattedCsv = formattedCsv %>% mutate(Longitude.x = replace_na(Longitude.x, 0)) %>% mutate(Longitude.y = replace_na(Longitude.y, 0)) %>% mutate(Longitude = Longitude.x + Longitude.y)
formattedCsv = formattedCsv %>% mutate(Latitude.x = replace_na(Latitude.x, 0)) %>% mutate(Latitude.y = replace_na(Latitude.y, 0)) %>% mutate(Latitude = Latitude.x + Latitude.y)
# Deleting old columns
formattedCsv = formattedCsv %>% select(-Latitude.x, -Latitude.y, -Longitude.x, -Longitude.y)
formattedCsv = formattedCsv %>% separate(Date, c("Month","Day", "Year"), sep = "/")
View(formattedCsv)
##
# START : Put Location in initial data
##
formattedCsv = initialcsv
# Concatenate Location columns
formattedCsv = formattedCsv %>% left_join(missing_location_completed, by= c("Longitude", "Latitude"))
formattedCsv = formattedCsv %>% mutate_if(is.character, function(x) {replace_na(x, "")})
formattedCsv = formattedCsv %>% unite(Location, Location.x, Location.y, sep="")
# Concatenate Longitude and Latitude columns
formattedCsv = formattedCsv %>% left_join(missing_lat_long_completed, by= "Location")
formattedCsv = formattedCsv %>% mutate_if(is.numeric, function(x) {replace_na(x, 0)})
formattedCsv = formattedCsv %>% mutate(Longitude.x = replace_na(Longitude.x, 0)) %>% mutate(Longitude.y = replace_na(Longitude.y, 0)) %>% mutate(Longitude = Longitude.x + Longitude.y)
formattedCsv = formattedCsv %>% mutate(Latitude.x = replace_na(Latitude.x, 0)) %>% mutate(Latitude.y = replace_na(Latitude.y, 0)) %>% mutate(Latitude = Latitude.x + Latitude.y)
# Deleting old columns
formattedCsv = formattedCsv %>% select(-Latitude.x, -Latitude.y, -Longitude.x, -Longitude.y)
##
# START : Separate Date to Year, Month, Day
##
dateTribble = formattedCsv$Date %>% mutate(Date = as.Date(Date, "%m/%d/%y"))
##
# START : Separate Date to Year, Month, Day
##
dateTribble = formattedCsv$Date %>% mutate(Date2 = as.Date(Date, "%m/%d/%y"))
##
# START : Separate Date to Year, Month, Day
##
dateTribble = formattedCsv %>% mutate(Date = as.Date(Date, "%m/%d/%y"))
View(dateTribble)
dateTribble$Day = weekdays(dateTribble$Date)
View(dateTribble)
dateTribble$Month = month(date$Date)
dateTribble$Month = months(date$Date)
View(dateTribble)
dateTribble$Month = months(dateTribble$Date)
View(dateTribble)
dateTribble$Year = year(dateTribble$Date)
glimpse(dateTribble)
##
# START : Separate Date to Year, Month, Day
##
formattedCsv = formattedCsv %>% mutate(Date = as.Date(Date, "%m/%d/%y"))
formattedCsv$Day = weekdays(formattedCsv$Date)
formattedCsv$Month = months(formattedCsv$Date)
formattedCsv$Year = year(formattedCsv$Date)
formattedCsv = formattedCsv %>% select(-Date)
View(formattedCsv)
rm(dateTribble)
View(formattedCsv)
View(formattedCsv)
gByTribble = formattedCsv
View(formattedCsv)
gByTribble = gByTribble %>% mutate(Gender = case_when("Male" ~ "M", "Female" ~ "F", "Male/Female" ~ "M/F", "Unknown" ~ "M/F"))
gByTribble = gByTribble %>% mutate(Gender = case_when(Gender == "Male" ~ "M", Gender == "Female" ~ "F", Gender == "Male/Female" ~ "M/F", Gender == "Unknown" ~ "M/F"))
View(gByTribble)
gByTribble = formattedCsv
gByTribble = gByTribble %>% mutate(Gender = case_when(Gender == "Male" ~ "M", Gender == "Female" ~ "F", Gender == "Male/Female" ~ "M/F", Gender == "Unknown" ~ "M/F", TRUE ~ Gender))
View(gByTribble)
#Race
gByTribble = gByTribble %>% mutate(Race = case_when(Race == "" ~ "Unknown", Race == "Other" ~ "Unknown", grepl(Race, "White", fixed = TRUE) ~ "White", grepl(Race, "Black", fixed = TRUE) ~ "Black", Race == "Some other race" ~ "Unknown", TRUE ~ Race ))
View(gByTribble)
gByTribble = formattedCsv
# Gender
gByTribble = gByTribble %>% mutate(Gender = case_when(Gender == "Male" ~ "M", Gender == "Female" ~ "F", Gender == "Male/Female" ~ "M/F", Gender == "Unknown" ~ "M/F", TRUE ~ Gender))
#Race
gByTribble = gByTribble %>% mutate(Race = case_when(Race == "" ~ "Unknown", Race == "Other" ~ "Unknown", grepl(Race, "White") ~ "White", grepl(Race, "Black") ~ "Black", Race == "Some other race" ~ "Unknown", TRUE ~ Race ))
gByTribble = formattedCsv
# Gender
gByTribble = gByTribble %>% mutate(Gender = case_when(Gender == "Male" ~ "M", Gender == "Female" ~ "F", Gender == "Male/Female" ~ "M/F", Gender == "Unknown" ~ "M/F", TRUE ~ Gender))
#Race
gByTribble = gByTribble %>% mutate(Race = case_when(Race == "" ~ "Unknown", Race == "Other" ~ "Unknown", grepl("White", Race) ~ "White", grepl(Race, "Black", fixed = TRUE) ~ "Black", Race == "Some other race" ~ "Unknown", TRUE ~ Race ))
gByTribble = formattedCsv
# Gender
gByTribble = gByTribble %>% mutate(Gender = case_when(Gender == "Male" ~ "M", Gender == "Female" ~ "F", Gender == "Male/Female" ~ "M/F", Gender == "Unknown" ~ "M/F", TRUE ~ Gender))
#Race
gByTribble = gByTribble %>% mutate(Race = case_when(
grepl("[Ww]hite", Race, fixed = TRUE) ~ "White",
grepl("[Bb]lack", Race, fixed = TRUE) ~ "Black",
grepl("[Aa]sian", Race, fixed = TRUE) ~ "Asian",
grepl("[Nn]ative", Race, fixed = TRUE) ~ "Native",
Race == "Some other race" | Race == "Two or more races" | Race == "Other" | Race == "" ~ "Unknown",
TRUE ~ Race
)
)
View(gByTribble)
#Race
gByTribble = gByTribble %>% mutate(Race = case_when(
grepl("[Ww]hite", Race) ~ "White",
grepl("[Bb]lack", Race) ~ "Black",
grepl("[Aa]sian", Race) ~ "Asian",
grepl("[Nn]ative", Race) ~ "Native",
Race == "Some other race" | Race == "Two or more races" | Race == "Other" | Race == "" ~ "Unknown",
TRUE ~ Race
)
)
View(gByTribble)
gByTribble = formattedCsv
# Gender
gByTribble = gByTribble %>% mutate(Gender = case_when(Gender == "Male" ~ "M", Gender == "Female" ~ "F", Gender == "Male/Female" ~ "M/F", Gender == "Unknown" ~ "M/F", TRUE ~ Gender))
#Race
gByTribble = gByTribble %>% mutate(Race = case_when(
grepl("[Ww]hite", Race) ~ "White",
grepl("[Bb]lack", Race) ~ "Black",
grepl("[Aa]sian", Race) ~ "Asian",
grepl("[Nn]ative", Race) ~ "Native",
Race == "Some other race" | Race == "Two or more races" | Race == "Other" | Race == "" ~ "Unknown",
TRUE ~ Race
)
)
# First letter uppercase function
firstup <- function(x) {
substr(x, 1, 1) <- toupper(substr(x, 1, 1))
x
}
install.packages("devtools")
if (!require(tidyverse)) {
install.packages("tidyverse")
}
if (!require(ggplot2)) {
install.packages("ggplot2")
}
library(tidyverse)
library(readr)
# First letter uppercase function
firstup <- function(x) {
substr(x, 1, 1) <- toupper(substr(x, 1, 1))
x
}
# Load Data
initialcsv = as_tibble(read_csv(file="US Mass Shootings.csv"))
# Get only Location , Latitude, Longitude cols
lat_long = initialcsv %>% select(Location, Latitude, Longitude)
glimpse(lat_long)
# Get only rows without NA
missing_location = lat_long %>% filter(is.na(Location)) %>% distinct()
missing_lat_long = lat_long %>% filter(is.na(Latitude)) %>% distinct()
# Library to get cities or coords
if (!require("devtools")) {
install.packages("devtools")
}
require(devtools)
if (!require(ggmap)) {
install.packages("ggmap")
}
library(ggmap)
if (!require(data.table)) {
install.packages("data.table")
}
library(data.table)
## KEEP CALM Please
register_google(key= "AIzaSyBvmBgdwG-0rxrdKkLaL8ZbdUORIv8gvwg")
##
# START : Retrieve lat lon for cities
##
missing_lat_long = as.data.frame(missing_lat_long %>% select(Location))
# Take some time to get response
missing_lat_long_completed = as_tibble(mutate_geocode(missing_lat_long, Location))
View(missing_lat_long_completed)
missing_lat_long_completed = missing_lat_long_completed %>% rename(Latitude = lat, Longitude = lon)
##
# START : Retrieve cities for lat lon
##
missing_location = as.data.frame(missing_location %>% select(Latitude, Longitude))
df_missing_location = as.data.frame(missing_location %>% rename(lat = Latitude, lon = Longitude))
# Create loop function
getCities = mapply(FUN = function(lon, lat) {
revgeocode(c(lon, lat), output = "all")
},
df_missing_location$lon, df_missing_location$lat
)
View(getCities)
# Create a blank list and initialize our counter
list = c()
i=1
source('D:/Emilien/Projets_Supinfo/5RBIG/projet/5RBIG/5RBIG.r')
